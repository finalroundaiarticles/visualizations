<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graph Adjacency List Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #FFFFFF;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        h1 {
            color: #000000;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 900px;
        }
        
        .graph-container {
            width: 100%;
            height: 400px;
            border: 2px solid #FD9F78;
            border-radius: 10px;
            margin-bottom: 20px;
            position: relative;
        }
        
        .node {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #FD9F78;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #000000;
            font-weight: bold;
            position: absolute;
            cursor: pointer;
            font-size: 18px;
            transition: transform 0.3s ease;
        }
        
        .node:hover {
            transform: scale(1.1);
            background-color: #FF4800;
        }
        
        .edge {
            position: absolute;
            height: 2px;
            background-color: #FF4800;
            transform-origin: 0 0;
            z-index: -1;
        }
        
        .adjacency-list {
            width: 100%;
            padding: 20px;
            border: 2px solid #FD9F78;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .list-item {
            display: flex;
            margin-bottom: 10px;
            align-items: center;
        }
        
        .node-label {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #FD9F78;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #000000;
            font-weight: bold;
            margin-right: 15px;
        }
        
        .connections {
            display: flex;
            flex-wrap: wrap;
        }
        
        .connection {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #FD9F78;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #000000;
            margin-right: 10px;
            margin-bottom: 5px;
            transition: transform 0.3s ease;
            opacity: 0;
            animation: fadeIn 0.5s forwards;
        }
        
        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }
        
        .explanation {
            width: 100%;
            padding: 20px;
            border: 2px solid #FD9F78;
            border-radius: 10px;
            color: #000000;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
        
        .btn {
            padding: 10px 20px;
            background-color: #FF4800;
            color: #FFFFFF;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 10px;
            font-weight: bold;
        }
        
        .btn:hover {
            background-color: #FD9F78;
        }
        
        .btn:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        .highlight {
            background-color: #FF4800;
            color: #FFFFFF;
            transform: scale(1.1);
        }
    </style>
</head>
<body>
    <h1>Graph Adjacency List Visualization</h1>
    
    <div class="container">
        <div class="explanation" id="explanation">
            Welcome to the Graph Adjacency List Visualization! Click "Next" to begin the tutorial.
        </div>
        
        <div class="graph-container" id="graph-container">
            <!-- Nodes and edges will be generated by JavaScript -->
        </div>
        
        <div class="adjacency-list" id="adjacency-list">
            <h2 style="color: #FF4800; text-align: center;">Adjacency List</h2>
            <!-- Adjacency list will be generated by JavaScript -->
        </div>
        
        <div class="controls">
            <button class="btn" id="prevBtn" disabled>Previous</button>
            <button class="btn" id="nextBtn">Next</button>
        </div>
    </div>
    
    <script>
        const steps = [
            {
                explanation: "Welcome to the Graph Adjacency List Visualization! An adjacency list is a way to represent a graph by showing which nodes are connected to each other.",
                showNodes: [],
                showEdges: [],
                highlightNodes: []
            },
            {
                explanation: "Let's start with a graph containing 4 nodes labeled 1, 2, 3, and 4.",
                showNodes: [1, 2, 3, 4],
                showEdges: [],
                highlightNodes: [1, 2, 3, 4]
            },
            {
                explanation: "Node 1 is connected to nodes 2 and 3. In the adjacency list, we represent this as '1 → [2, 3]'.",
                showNodes: [1, 2, 3, 4],
                showEdges: [[1, 2], [1, 3]],
                highlightNodes: [1],
                highlightConnections: {1: [2, 3]}
            },
            {
                explanation: "Node 2 is connected to nodes 1 and 4. In the adjacency list, this is represented as '2 → [1, 4]'.",
                showNodes: [1, 2, 3, 4],
                showEdges: [[1, 2], [1, 3], [2, 4]],
                highlightNodes: [2],
                highlightConnections: {2: [1, 4]}
            },
            {
                explanation: "Node 3 is connected to nodes 1 and 4. In the adjacency list, this is represented as '3 → [1, 4]'.",
                showNodes: [1, 2, 3, 4],
                showEdges: [[1, 2], [1, 3], [2, 4], [3, 4]],
                highlightNodes: [3],
                highlightConnections: {3: [1, 4]}
            },
            {
                explanation: "Node 4 is connected to nodes 2 and 3. In the adjacency list, this is represented as '4 → [2, 3]'.",
                showNodes: [1, 2, 3, 4],
                showEdges: [[1, 2], [1, 3], [2, 4], [3, 4]],
                highlightNodes: [4],
                highlightConnections: {4: [2, 3]}
            },
            {
                explanation: "The complete adjacency list for this graph is shown below. This representation makes it easy to see which nodes are connected to each node in the graph.",
                showNodes: [1, 2, 3, 4],
                showEdges: [[1, 2], [1, 3], [2, 4], [3, 4]],
                highlightNodes: [],
                showFullList: true
            }
        ];
        
        // Node positions
        const nodePositions = {
            1: { x: 150, y: 100 },
            2: { x: 350, y: 100 },
            3: { x: 150, y: 300 },
            4: { x: 350, y: 300 }
        };
        
        // Adjacency list representation
        const adjacencyList = {
            1: [2, 3],
            2: [1, 4],
            3: [1, 4],
            4: [2, 3]
        };
        
        let currentStep = 0;
        const graphContainer = document.getElementById('graph-container');
        const adjacencyListContainer = document.getElementById('adjacency-list');
        const explanationContainer = document.getElementById('explanation');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        
        // Initialize the visualization
        function initVisualization() {
            updateStep();
        }
        
        // Update the visualization based on the current step
        function updateStep() {
            const step = steps[currentStep];
            
            // Clear containers
            graphContainer.innerHTML = '';
            adjacencyListContainer.innerHTML = '<h2 style="color: #FF4800; text-align: center;">Adjacency List</h2>';
            
            // Update explanation
            explanationContainer.textContent = step.explanation;
            
            // Create nodes
            for (const nodeId of step.showNodes) {
                createNode(nodeId);
            }
            
            // Create edges
            for (const [fromId, toId] of step.showEdges) {
                createEdge(fromId, toId);
            }
            
            // Update adjacency list
            if (step.showFullList) {
                for (const nodeId in adjacencyList) {
                    createListItem(parseInt(nodeId), adjacencyList[nodeId], false);
                }
            } else if (step.highlightNodes && step.highlightNodes.length > 0) {
                for (const nodeId of step.highlightNodes) {
                    createListItem(nodeId, adjacencyList[nodeId], true, step.highlightConnections?.[nodeId]);
                }
            }
            
            // Highlight nodes
            if (step.highlightNodes) {
                for (const nodeId of step.highlightNodes) {
                    const nodeElement = document.getElementById(`node-${nodeId}`);
                    if (nodeElement) {
                        nodeElement.classList.add('highlight');
                    }
                }
            }
            
            // Update buttons
            prevBtn.disabled = currentStep === 0;
            nextBtn.disabled = currentStep === steps.length - 1;
        }
        
        // Create a node
        function createNode(id) {
            const node = document.createElement('div');
            node.className = 'node';
            node.id = `node-${id}`;
            node.textContent = id;
            node.style.left = `${nodePositions[id].x}px`;
            node.style.top = `${nodePositions[id].y}px`;
            graphContainer.appendChild(node);
        }
        
        // Create an edge
        function createEdge(fromId, toId) {
            const fromPos = nodePositions[fromId];
            const toPos = nodePositions[toId];
            
            // Calculate distance and angle
            const dx = toPos.x - fromPos.x;
            const dy = toPos.y - fromPos.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            const angle = Math.atan2(dy, dx) * (180 / Math.PI);
            
            // Create edge
            const edge = document.createElement('div');
            edge.className = 'edge';
            edge.style.width = `${distance}px`;
            edge.style.left = `${fromPos.x + 25}px`;
            edge.style.top = `${fromPos.y + 25}px`;
            edge.style.transform = `rotate(${angle}deg)`;
            
            graphContainer.appendChild(edge);
        }
        
        // Create adjacency list item
        function createListItem(nodeId, connections, animate = false, highlightConnections = []) {
            const listItem = document.createElement('div');
            listItem.className = 'list-item';
            
            const nodeLabel = document.createElement('div');
            nodeLabel.className = 'node-label';
            nodeLabel.textContent = nodeId;
            
            const connectionsList = document.createElement('div');
            connectionsList.className = 'connections';
            
            listItem.appendChild(nodeLabel);
            listItem.appendChild(document.createTextNode(' → '));
            listItem.appendChild(connectionsList);
            
            adjacencyListContainer.appendChild(listItem);
            
            if (animate) {
                let delay = 0;
                for (const connId of connections) {
                    setTimeout(() => {
                        const connNode = document.createElement('div');
                        connNode.className = 'connection';
                        if (highlightConnections && highlightConnections.includes(connId)) {
                            connNode.classList.add('highlight');
                        }
                        connNode.textContent = connId;
                        connectionsList.appendChild(connNode);
                    }, delay);
                    delay += 300;
                }
            } else {
                for (const connId of connections) {
                    const connNode = document.createElement('div');
                    connNode.className = 'connection';
                    connNode.textContent = connId;
                    connectionsList.appendChild(connNode);
                }
            }
        }
        
        // Event listeners for navigation buttons
        prevBtn.addEventListener('click', () => {
            if (currentStep > 0) {
                currentStep--;
                updateStep();
            }
        });
        
        nextBtn.addEventListener('click', () => {
            if (currentStep < steps.length - 1) {
                currentStep++;
                updateStep();
            }
        });
        
        // Initialize the visualization
        initVisualization();
    </script>
</body>
</html>