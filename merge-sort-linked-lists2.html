<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merge Sort for Linked List Animation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #FF4800, #FD9F78);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: #FFFFFF;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 1200px;
            width: 100%;
        }

        h1 {
            color: #000000;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            font-weight: bold;
        }

        .animation-area {
            min-height: 500px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            margin: 40px 0;
        }

        .step-title {
            color: #FF4800;
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 30px;
            text-align: center;
        }

        .step-description {
            color: #000000;
            font-size: 1.2em;
            text-align: center;
            margin-bottom: 40px;
            line-height: 1.6;
        }

        .linked-list {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .node {
            width: 60px;
            height: 60px;
            background: #FF4800;
            color: #FFFFFF;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: bold;
            margin: 10px 5px;
            position: relative;
            animation: nodeAppear 0.5s ease-in-out;
            box-shadow: 0 4px 15px rgba(255, 72, 0, 0.3);
        }

        .node.highlight {
            background: #FD9F78;
            transform: scale(1.1);
            animation: pulse 1s infinite;
        }

        .node.sorted {
            background: #000000;
        }

        .arrow {
            color: #FF4800;
            font-size: 2em;
            font-weight: bold;
            margin: 0 10px;
        }

        .level {
            margin: 30px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .level-label {
            color: #FF4800;
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .split-animation {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 40px;
        }

        .merge-animation {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }

        .navigation {
            display: flex;
            gap: 20px;
            margin-top: 30px;
        }

        .nav-btn {
            background: #FF4800;
            color: #FFFFFF;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 72, 0, 0.3);
        }

        .nav-btn:hover {
            background: #FD9F78;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 72, 0, 0.4);
        }

        .nav-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .step-counter {
            background: #000000;
            color: #FFFFFF;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        @keyframes nodeAppear {
            from {
                opacity: 0;
                transform: scale(0.5);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1.1);
            }
            50% {
                transform: scale(1.2);
            }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .slide-down {
            animation: slideDown 0.6s ease-out;
        }

        .bracket {
            color: #FF4800;
            font-size: 3em;
            font-weight: bold;
            margin: 0 20px;
        }

        .merge-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .merge-inputs {
            display: flex;
            gap: 40px;
            align-items: center;
        }

        .merge-result {
            border-top: 3px solid #FF4800;
            padding-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Merge Sort for Linked List</h1>
        
        <div class="step-counter">
            <span id="stepCounter">Step 1 of 8</span>
        </div>

        <div class="animation-area">
            <div class="step-title" id="stepTitle">Original Linked List</div>
            <div class="step-description" id="stepDescription">
                Here's our starting linked list: [4 → 2 → 1 → 3]. We need to sort it using merge sort.
            </div>
            <div id="animationContent"></div>
        </div>

        <div class="navigation">
            <button class="nav-btn" id="prevBtn" onclick="previousStep()">← Previous</button>
            <button class="nav-btn" id="nextBtn" onclick="nextStep()">Next →</button>
        </div>
    </div>

    <script>
        let currentStep = 0;
        const totalSteps = 8;

        const steps = [
            {
                title: "Original Linked List",
                description: "Here's our starting linked list: [4 → 2 → 1 → 3]. We need to sort it using merge sort.",
                content: () => createLinkedList([4, 2, 1, 3])
            },
            {
                title: "First Division",
                description: "Merge sort works by dividing the list into two halves. We split [4 → 2 → 1 → 3] into [4 → 2] and [1 → 3].",
                content: () => createSplitView([4, 2, 1, 3], [[4, 2], [1, 3]])
            },
            {
                title: "Further Division - Left Half",
                description: "We continue dividing. The left half [4 → 2] is split into [4] and [2].",
                content: () => createSplitView([4, 2], [[4], [2]], "Left Half Division")
            },
            {
                title: "Further Division - Right Half",
                description: "Similarly, the right half [1 → 3] is split into [1] and [3]. Now we have individual elements.",
                content: () => createSplitView([1, 3], [[1], [3]], "Right Half Division")
            },
            {
                title: "All Individual Elements",
                description: "Now we have four individual elements: [4], [2], [1], [3]. Individual elements are considered sorted.",
                content: () => createIndividualElements()
            },
            {
                title: "First Merge - Left Side",
                description: "We start merging back. Compare 4 and 2: since 2 < 4, we get [2 → 4].",
                content: () => createMergeView([4], [2], [2, 4], "Merging Left Pairs")
            },
            {
                title: "First Merge - Right Side",
                description: "Compare 1 and 3: since 1 < 3, we get [1 → 3].",
                content: () => createMergeView([1], [3], [1, 3], "Merging Right Pairs")
            },
            {
                title: "Final Merge",
                description: "Finally, merge [2 → 4] and [1 → 3]. Compare elements one by one: 1 < 2, so 1 goes first, then 2 < 3, so 2 goes next, then 3 < 4, so 3 goes next, finally 4. Result: [1 → 2 → 3 → 4]",
                content: () => createMergeView([2, 4], [1, 3], [1, 2, 3, 4], "Final Merge")
            }
        ];

        function createLinkedList(arr, highlightIndex = -1) {
            const container = document.createElement('div');
            container.className = 'linked-list';
            
            arr.forEach((val, index) => {
                const node = document.createElement('div');
                node.className = `node ${index === highlightIndex ? 'highlight' : ''}`;
                node.textContent = val;
                container.appendChild(node);
                
                if (index < arr.length - 1) {
                    const arrow = document.createElement('div');
                    arrow.className = 'arrow';
                    arrow.textContent = '→';
                    container.appendChild(arrow);
                }
            });
            
            return container;
        }

        function createSplitView(original, splits, subtitle = "") {
            const container = document.createElement('div');
            container.className = 'split-animation';
            
            if (subtitle) {
                const subtitleDiv = document.createElement('div');
                subtitleDiv.className = 'level-label';
                subtitleDiv.textContent = subtitle;
                container.appendChild(subtitleDiv);
            }
            
            const originalDiv = document.createElement('div');
            originalDiv.className = 'level';
            const originalLabel = document.createElement('div');
            originalLabel.className = 'level-label';
            originalLabel.textContent = 'Original:';
            originalDiv.appendChild(originalLabel);
            originalDiv.appendChild(createLinkedList(original));
            container.appendChild(originalDiv);
            
            const arrowDown = document.createElement('div');
            arrowDown.style.fontSize = '2em';
            arrowDown.style.color = '#FF4800';
            arrowDown.textContent = '↓';
            container.appendChild(arrowDown);
            
            const splitsDiv = document.createElement('div');
            splitsDiv.className = 'level slide-down';
            const splitsLabel = document.createElement('div');
            splitsLabel.className = 'level-label';
            splitsLabel.textContent = 'After Split:';
            splitsDiv.appendChild(splitsLabel);
            
            const splitsContainer = document.createElement('div');
            splitsContainer.style.display = 'flex';
            splitsContainer.style.gap = '40px';
            splitsContainer.style.alignItems = 'center';
            
            splits.forEach((split, index) => {
                splitsContainer.appendChild(createLinkedList(split));
                if (index < splits.length - 1) {
                    const separator = document.createElement('div');
                    separator.style.color = '#000000';
                    separator.style.fontSize = '1.5em';
                    separator.style.fontWeight = 'bold';
                    separator.textContent = 'and';
                    splitsContainer.appendChild(separator);
                }
            });
            
            splitsDiv.appendChild(splitsContainer);
            container.appendChild(splitsDiv);
            
            return container;
        }

        function createIndividualElements() {
            const container = document.createElement('div');
            container.className = 'split-animation';
            
            const label = document.createElement('div');
            label.className = 'level-label';
            label.textContent = 'All Individual Elements (Base Case):';
            container.appendChild(label);
            
            const elementsContainer = document.createElement('div');
            elementsContainer.style.display = 'flex';
            elementsContainer.style.gap = '30px';
            elementsContainer.style.alignItems = 'center';
            elementsContainer.style.marginTop = '20px';
            
            [4, 2, 1, 3].forEach((val, index) => {
                elementsContainer.appendChild(createLinkedList([val]));
                if (index < 3) {
                    const separator = document.createElement('div');
                    separator.style.color = '#FD9F78';
                    separator.style.fontSize = '1.2em';
                    separator.textContent = '|';
                    elementsContainer.appendChild(separator);
                }
            });
            
            container.appendChild(elementsContainer);
            return container;
        }

        function createMergeView(left, right, result, subtitle) {
            const container = document.createElement('div');
            container.className = 'merge-animation';
            
            const subtitleDiv = document.createElement('div');
            subtitleDiv.className = 'level-label';
            subtitleDiv.textContent = subtitle;
            container.appendChild(subtitleDiv);
            
            const mergeStep = document.createElement('div');
            mergeStep.className = 'merge-step';
            
            const inputs = document.createElement('div');
            inputs.className = 'merge-inputs';
            
            inputs.appendChild(createLinkedList(left));
            
            const plusSign = document.createElement('div');
            plusSign.style.color = '#FF4800';
            plusSign.style.fontSize = '2em';
            plusSign.style.fontWeight = 'bold';
            plusSign.textContent = '+';
            inputs.appendChild(plusSign);
            
            inputs.appendChild(createLinkedList(right));
            
            mergeStep.appendChild(inputs);
            
            const arrowDown = document.createElement('div');
            arrowDown.style.fontSize = '2em';
            arrowDown.style.color = '#FF4800';
            arrowDown.textContent = '↓';
            mergeStep.appendChild(arrowDown);
            
            const resultDiv = document.createElement('div');
            resultDiv.className = 'merge-result';
            const resultLabel = document.createElement('div');
            resultLabel.className = 'level-label';
            resultLabel.textContent = 'Merged Result:';
            resultDiv.appendChild(resultLabel);
            
            const sortedList = createLinkedList(result);
            sortedList.querySelectorAll('.node').forEach(node => {
                node.classList.add('sorted');
            });
            resultDiv.appendChild(sortedList);
            
            mergeStep.appendChild(resultDiv);
            container.appendChild(mergeStep);
            
            return container;
        }

        function updateStep() {
            const step = steps[currentStep];
            document.getElementById('stepTitle').textContent = step.title;
            document.getElementById('stepDescription').textContent = step.description;
            document.getElementById('stepCounter').textContent = `Step ${currentStep + 1} of ${totalSteps}`;
            
            const animationContent = document.getElementById('animationContent');
            animationContent.innerHTML = '';
            animationContent.appendChild(step.content());
            
            document.getElementById('prevBtn').disabled = currentStep === 0;
            document.getElementById('nextBtn').disabled = currentStep === totalSteps - 1;
        }

        function nextStep() {
            if (currentStep < totalSteps - 1) {
                currentStep++;
                updateStep();
            }
        }

        function previousStep() {
            if (currentStep > 0) {
                currentStep--;
                updateStep();
            }
        }

        // Initialize
        updateStep();
    </script>
</body>
</html>