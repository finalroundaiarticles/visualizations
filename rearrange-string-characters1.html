<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Priority Queue Character Selection Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #FFFFFF;
            margin: 0;
            padding: 20px;
            color: #000000;
        }
        
        h1 {
            color: #FF4800;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        .step-container {
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        .step-container.active {
            display: flex;
        }
        
        .step-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #FF4800;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .step-description {
            font-size: 1.1rem;
            text-align: center;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .heap-container {
            position: relative;
            width: 500px;
            height: 300px;
            margin: 20px auto;
        }
        
        .node {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #FD9F78;
            color: #000000;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.3rem;
            font-weight: bold;
            border: 3px solid #FF4800;
            transition: all 0.5s ease;
        }
        
        .edge {
            position: absolute;
            background-color: #FF4800;
            height: 3px;
            transform-origin: left center;
            transition: all 0.5s ease;
        }
        
        .result-string {
            font-size: 1.5rem;
            font-weight: bold;
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #FD9F78;
            border-radius: 5px;
            color: #000000;
            display: inline-block;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: center;
            margin-top: 30px;
            gap: 20px;
        }
        
        .nav-button {
            padding: 10px 20px;
            background-color: #FF4800;
            color: #FFFFFF;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        .nav-button:hover {
            background-color: #FD9F78;
        }
        
        .nav-button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        .counter {
            position: absolute;
            top: -15px;
            right: -15px;
            width: 30px;
            height: 30px;
            background-color: #FF4800;
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .output-string {
            margin-top: 20px;
            font-size: 1.3rem;
            color: #000000;
            font-weight: bold;
        }
        
        .highlight {
            color: #FF4800;
            font-weight: bold;
        }
        
        .operation-box {
            padding: 10px 20px;
            background-color: #FD9F78;
            border-radius: 5px;
            margin-top: 15px;
            font-weight: bold;
            display: inline-block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Priority Queue Character Selection Visualization</h1>
        
        <!-- Step 1: Initial State -->
        <div class="step-container active" id="step1">
            <div class="step-title">Step 1: Initial State</div>
            <div class="step-description">
                For the string 'aab', we first count the frequency of each character:<br>
                'a' appears 2 times, 'b' appears 1 time.<br>
                We insert these characters into a max heap based on their frequency.
            </div>
            <div class="heap-container">
                <div class="node" style="top: 10px; left: 220px;">
                    a
                    <div class="counter">2</div>
                </div>
                <div class="node" style="top: 100px; left: 120px;">
                    b
                    <div class="counter">1</div>
                </div>
                <div class="edge" style="width: 115px; top: 40px; left: 245px; transform: rotate(135deg);"></div>
            </div>
            <div class="operation-box">
                Heap initialized with character frequencies
            </div>
            <div class="output-string">
                Output string: <span class="result-string"></span>
            </div>
        </div>
        
        <!-- Step 2: Remove 'a' first time -->
        <div class="step-container" id="step2">
            <div class="step-title">Step 2: Remove 'a' from Max Heap (First Time)</div>
            <div class="step-description">
                We extract the highest frequency character ('a' with frequency 2).<br>
                After extraction, we decrease its frequency by 1 and may reinsert it.
            </div>
            <div class="heap-container">
                <div class="node" style="top: 10px; left: 220px;">
                    b
                    <div class="counter">1</div>
                </div>
                <div class="node" style="top: 200px; left: 400px; opacity: 0.7;">
                    a
                    <div class="counter">1</div>
                </div>
                <div class="edge" style="width: 0px; top: 40px; left: 245px; opacity: 0;"></div>
            </div>
            <div class="operation-box">
                Extract 'a', decrease frequency to 1, will be reinserted
            </div>
            <div class="output-string">
                Output string: <span class="result-string">a</span>
            </div>
        </div>
        
        <!-- Step 3: Reinsert 'a' -->
        <div class="step-container" id="step3">
            <div class="step-title">Step 3: Reinsert 'a' into Max Heap</div>
            <div class="step-description">
                We reinsert 'a' with its new frequency (1).<br>
                Since both 'a' and 'b' have the same frequency now, the max heap can have either as the root.
            </div>
            <div class="heap-container">
                <div class="node" style="top: 10px; left: 220px;">
                    a
                    <div class="counter">1</div>
                </div>
                <div class="node" style="top: 100px; left: 120px;">
                    b
                    <div class="counter">1</div>
                </div>
                <div class="edge" style="width: 115px; top: 40px; left: 245px; transform: rotate(135deg);"></div>
            </div>
            <div class="operation-box">
                Reinsert 'a' with frequency 1
            </div>
            <div class="output-string">
                Output string: <span class="result-string">a</span>
            </div>
        </div>
        
        <!-- Step 4: Remove 'a' second time -->
        <div class="step-container" id="step4">
            <div class="step-title">Step 4: Remove 'a' from Max Heap (Second Time)</div>
            <div class="step-description">
                We extract the highest frequency character again ('a' with frequency 1).<br>
                After extraction, its frequency becomes 0, so we don't reinsert it.
            </div>
            <div class="heap-container">
                <div class="node" style="top: 10px; left: 220px;">
                    b
                    <div class="counter">1</div>
                </div>
                <div class="node" style="top: 200px; left: 400px; opacity: 0.5;">
                    a
                    <div class="counter">0</div>
                </div>
            </div>
            <div class="operation-box">
                Extract 'a', frequency becomes 0, not reinserted
            </div>
            <div class="output-string">
                Output string: <span class="result-string">aa</span>
            </div>
        </div>
        
        <!-- Step 5: Remove 'b' -->
        <div class="step-container" id="step5">
            <div class="step-title">Step 5: Remove 'b' from Max Heap</div>
            <div class="step-description">
                We extract the last character in the heap ('b' with frequency 1).<br>
                After extraction, its frequency becomes 0, so the heap becomes empty.
            </div>
            <div class="heap-container">
                <div class="node" style="top: 200px; left: 220px; opacity: 0.5;">
                    b
                    <div class="counter">0</div>
                </div>
                <div class="operation-box" style="position: absolute; top: 50px; left: 170px;">
                    Empty Heap
                </div>
            </div>
            <div class="operation-box">
                Extract 'b', frequency becomes 0, heap is now empty
            </div>
            <div class="output-string">
                Output string: <span class="result-string">aab</span>
            </div>
        </div>
        
        <!-- Step 6: Final Result -->
        <div class="step-container" id="step6">
            <div class="step-title">Step 6: Final Result</div>
            <div class="step-description">
                The heap is now empty, and we have successfully constructed our string<br>
                using the priority queue approach, always taking the most frequent character first.
            </div>
            <div class="result-string" style="font-size: 2rem; padding: 20px 40px;">aab</div>
            <div class="step-description">
                <strong>Summary:</strong><br>
                1. Initialize max heap with character frequencies ('a':2, 'b':1)<br>
                2. Extract most frequent character, add to result, decrement count<br>
                3. Reinsert if frequency > 0<br>
                4. Repeat until heap is empty
            </div>
        </div>
        
        <div class="nav-buttons">
            <button class="nav-button" id="prevBtn" disabled>Previous</button>
            <button class="nav-button" id="nextBtn">Next</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const steps = document.querySelectorAll('.step-container');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            let currentStep = 0;
            
            // Show the current step
            function showStep(stepIndex) {
                steps.forEach((step, index) => {
                    if (index === stepIndex) {
                        step.classList.add('active');
                    } else {
                        step.classList.remove('active');
                    }
                });
                
                // Update button states
                prevBtn.disabled = stepIndex === 0;
                nextBtn.disabled = stepIndex === steps.length - 1;
            }
            
            // Handle next button click
            nextBtn.addEventListener('click', function() {
                if (currentStep < steps.length - 1) {
                    currentStep++;
                    showStep(currentStep);
                }
            });
            
            // Handle previous button click
            prevBtn.addEventListener('click', function() {
                if (currentStep > 0) {
                    currentStep--;
                    showStep(currentStep);
                }
            });
            
            // Initialize the first step
            showStep(currentStep);
        });
    </script>
</body>
</html>