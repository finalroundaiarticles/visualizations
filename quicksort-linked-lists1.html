<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linked List Partitioning Visualization</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: #FFFFFF;
            color: #000000;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #FF4800;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #000000;
            font-size: 1.2em;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .visualization-area {
            background-color: #FFFFFF;
            border: 3px solid #FF4800;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            min-height: 500px;
            position: relative;
        }

        .step-info {
            background-color: #FD9F78;
            color: #000000;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.1em;
            font-weight: bold;
        }

        .linked-list {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 10px;
        }

        .node {
            width: 60px;
            height: 60px;
            background-color: #FFFFFF;
            border: 3px solid #FF4800;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: bold;
            color: #000000;
            position: relative;
            transition: all 0.5s ease;
        }

        .node.pivot {
            background-color: #FF4800;
            color: #FFFFFF;
            animation: pulse 1s infinite;
        }

        .node.smaller {
            background-color: #FD9F78;
            color: #000000;
        }

        .node.greater {
            background-color: #000000;
            color: #FFFFFF;
        }

        .arrow {
            width: 40px;
            height: 3px;
            background-color: #FF4800;
            position: relative;
            margin: 0 5px;
        }

        .arrow::after {
            content: '';
            position: absolute;
            right: -5px;
            top: -5px;
            width: 0;
            height: 0;
            border-left: 10px solid #FF4800;
            border-top: 6px solid transparent;
            border-bottom: 6px solid transparent;
        }

        .lists-container {
            display: flex;
            justify-content: space-around;
            margin: 40px 0;
            flex-wrap: wrap;
            gap: 20px;
        }

        .list-section {
            text-align: center;
            min-width: 200px;
        }

        .list-title {
            background-color: #FF4800;
            color: #FFFFFF;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .btn {
            background-color: #FF4800;
            color: #FFFFFF;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background-color: #FD9F78;
            color: #000000;
            transform: translateY(-2px);
        }

        .btn:disabled {
            background-color: #cccccc;
            color: #666666;
            cursor: not-allowed;
            transform: none;
        }

        .step-counter {
            text-align: center;
            font-size: 1.2em;
            color: #FF4800;
            font-weight: bold;
            margin-bottom: 20px;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes moveNode {
            0% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0); }
        }

        .moving {
            animation: moveNode 0.8s ease;
        }

        .pivot-info {
            text-align: center;
            background-color: #FF4800;
            color: #FFFFFF;
            padding: 10px;
            border-radius: 5px;
            margin: 20px 0;
            font-size: 1.1em;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .node {
                width: 50px;
                height: 50px;
                font-size: 1.2em;
            }
            
            .arrow {
                width: 30px;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Linked List Partitioning</h1>
            <p>Watch how we partition a linked list around a pivot value. Nodes smaller than the pivot go to the left, and nodes greater or equal go to the right.</p>
        </div>

        <div class="visualization-area">
            <div class="step-counter">
                <span id="stepCounter">Step 1 of 6</span>
            </div>
            
            <div class="step-info" id="stepInfo">
                Original linked list: 4 → 2 → 1 → 3. We'll partition around pivot value 3.
            </div>

            <div class="pivot-info" id="pivotInfo">
                Pivot Value: 3
            </div>

            <div id="mainVisualization">
                <div class="linked-list" id="originalList">
                    <div class="node" data-value="4">4</div>
                    <div class="arrow"></div>
                    <div class="node" data-value="2">2</div>
                    <div class="arrow"></div>
                    <div class="node" data-value="1">1</div>
                    <div class="arrow"></div>
                    <div class="node" data-value="3">3</div>
                </div>
            </div>

            <div class="lists-container" id="partitionLists" style="display: none;">
                <div class="list-section">
                    <div class="list-title">Smaller than Pivot (&lt; 3)</div>
                    <div class="linked-list" id="smallerList"></div>
                </div>
                <div class="list-section">
                    <div class="list-title">Greater or Equal to Pivot (≥ 3)</div>
                    <div class="linked-list" id="greaterList"></div>
                </div>
            </div>

            <div class="linked-list" id="finalList" style="display: none;"></div>
        </div>

        <div class="controls">
            <button class="btn" id="prevBtn" onclick="previousStep()">Previous</button>
            <button class="btn" id="nextBtn" onclick="nextStep()">Next</button>
        </div>
    </div>

    <script>
        let currentStep = 0;
        const totalSteps = 6;
        const pivot = 3;
        const originalData = [4, 2, 1, 3];
        let smallerNodes = [];
        let greaterNodes = [];

        const steps = [
            {
                title: "Original linked list: 4 → 2 → 1 → 3. We'll partition around pivot value 3.",
                action: showOriginalList
            },
            {
                title: "Start partitioning: Check node 4. Since 4 ≥ 3, it goes to the 'greater' list.",
                action: () => processNode(0, 'greater')
            },
            {
                title: "Check node 2. Since 2 < 3, it goes to the 'smaller' list.",
                action: () => processNode(1, 'smaller')
            },
            {
                title: "Check node 1. Since 1 < 3, it goes to the 'smaller' list.",
                action: () => processNode(2, 'smaller')
            },
            {
                title: "Check node 3. Since 3 ≥ 3, it goes to the 'greater' list.",
                action: () => processNode(3, 'greater')
            },
            {
                title: "Combine the lists: smaller list + greater list = 2 → 1 → 4 → 3",
                action: showFinalResult
            }
        ];

        function updateStepCounter() {
            document.getElementById('stepCounter').textContent = `Step ${currentStep + 1} of ${totalSteps}`;
        }

        function updateStepInfo(text) {
            document.getElementById('stepInfo').textContent = text;
        }

        function updateButtons() {
            document.getElementById('prevBtn').disabled = currentStep === 0;
            document.getElementById('nextBtn').disabled = currentStep === totalSteps - 1;
        }

        function showOriginalList() {
            document.getElementById('originalList').style.display = 'flex';
            document.getElementById('partitionLists').style.display = 'none';
            document.getElementById('finalList').style.display = 'none';
            
            // Reset all nodes
            const nodes = document.querySelectorAll('.node');
            nodes.forEach(node => {
                node.className = 'node';
            });
        }

        function processNode(nodeIndex, listType) {
            document.getElementById('partitionLists').style.display = 'flex';
            
            const nodes = document.querySelectorAll('#originalList .node');
            const currentNode = nodes[nodeIndex];
            const value = parseInt(currentNode.dataset.value);
            
            // Highlight current node
            currentNode.classList.add('moving');
            
            setTimeout(() => {
                currentNode.classList.remove('moving');
                
                if (listType === 'smaller') {
                    smallerNodes.push(value);
                    updateListDisplay('smallerList', smallerNodes, 'smaller');
                } else {
                    greaterNodes.push(value);
                    updateListDisplay('greaterList', greaterNodes, 'greater');
                }
            }, 400);
        }

        function updateListDisplay(containerId, nodeArray, className) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            nodeArray.forEach((value, index) => {
                const nodeElement = document.createElement('div');
                nodeElement.className = `node ${className}`;
                nodeElement.textContent = value;
                container.appendChild(nodeElement);
                
                if (index < nodeArray.length - 1) {
                    const arrow = document.createElement('div');
                    arrow.className = 'arrow';
                    container.appendChild(arrow);
                }
            });
        }

        function showFinalResult() {
            document.getElementById('originalList').style.display = 'none';
            document.getElementById('partitionLists').style.display = 'none';
            document.getElementById('finalList').style.display = 'flex';
            
            const finalContainer = document.getElementById('finalList');
            finalContainer.innerHTML = '';
            
            const finalOrder = [...smallerNodes, ...greaterNodes];
            
            finalOrder.forEach((value, index) => {
                const nodeElement = document.createElement('div');
                nodeElement.className = 'node';
                if (value < pivot) {
                    nodeElement.classList.add('smaller');
                } else {
                    nodeElement.classList.add('greater');
                }
                nodeElement.textContent = value;
                finalContainer.appendChild(nodeElement);
                
                if (index < finalOrder.length - 1) {
                    const arrow = document.createElement('div');
                    arrow.className = 'arrow';
                    finalContainer.appendChild(arrow);
                }
            });
        }

        function nextStep() {
            if (currentStep < totalSteps - 1) {
                currentStep++;
                updateStepCounter();
                updateStepInfo(steps[currentStep].title);
                steps[currentStep].action();
                updateButtons();
            }
        }

        function previousStep() {
            if (currentStep > 0) {
                currentStep--;
                updateStepCounter();
                updateStepInfo(steps[currentStep].title);
                
                // Reset state for previous steps
                if (currentStep === 0) {
                    smallerNodes = [];
                    greaterNodes = [];
                    showOriginalList();
                } else if (currentStep < 4) {
                    // Rebuild state up to current step
                    smallerNodes = [];
                    greaterNodes = [];
                    for (let i = 1; i <= currentStep; i++) {
                        if (i === 1) greaterNodes.push(4);
                        else if (i === 2) smallerNodes.push(2);
                        else if (i === 3) smallerNodes.push(1);
                        else if (i === 4) greaterNodes.push(3);
                    }
                    steps[currentStep].action();
                } else {
                    steps[currentStep].action();
                }
                
                updateButtons();
            }
        }

        // Initialize
        updateStepCounter();
        updateStepInfo(steps[0].title);
        updateButtons();
        showOriginalList();
    </script>
</body>
</html>